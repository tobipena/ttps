<div>
<label class="form-label text-uppercase fw-semibold text-muted small mb-2">
    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="me-1">
      @if (icon === 'user') {
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
        <circle cx="12" cy="7" r="4"/>
      } @else if (icon === 'email') {
        <rect x="2" y="4" width="20" height="16" rx="2"/>
        <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
      } @else if (icon === 'phone') {
        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
      } @else if (icon === 'location') {
        <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/>
        <circle cx="12" cy="10" r="3"/>
      } @else if (icon === 'home') {
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
        <polyline points="9 22 9 12 15 12 15 22"/>
      } @else if (icon === 'lock') {
        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
        <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
      }
    </svg>
    {{ label }}
  </label>
  
  @if (isEditing) {
    <div>
      @if (type === 'password') {
        <!-- Dos campos de contrase単a -->
        <div class="mb-3">
          <label class="form-label small text-muted mb-1">Nueva contrase単a</label>
          <input
            type="password"
            (input)="onTempValueChange($any($event.target).value)"
            class="form-control form-control-lg shadow-sm"
            [placeholder]="placeholder"
          >
        </div>
        <div class="mb-3">
          <label class="form-label small text-muted mb-1">Confirmar contrase単a</label>
          <input
            type="password"
            [value]="confirmValue"
            (input)="onConfirmValueChange($any($event.target).value)"
            class="form-control form-control-lg shadow-sm"
            placeholder="Repetir contrase単a"
          >
        </div>
        <div class="d-flex gap-2">
          <button class="btn btn-primary flex-fill" type="button" (click)="save.emit()">
            <i class="bi bi-check-lg me-1"></i> Guardar
          </button>
          <button class="btn btn-outline-secondary flex-fill" type="button" (click)="cancel.emit()">
            <i class="bi bi-x-lg me-1"></i> Cancelar
          </button>
        </div>
      } @else {
        <!-- Campo simple -->
        <input
          [type]="type"
          [value]="tempValue"
          (input)="onTempValueChange($any($event.target).value)"
          class="form-control form-control-lg shadow-sm"
          [placeholder]="placeholder"
        >
        <div class="d-flex gap-2 mt-2">
          <button class="btn btn-primary flex-fill" type="button" (click)="save.emit()">
            <i class="bi bi-check-lg me-1"></i> Guardar
          </button>
          <button class="btn btn-outline-secondary flex-fill" type="button" (click)="cancel.emit()">
            <i class="bi bi-x-lg me-1"></i> Cancelar
          </button>
        </div>
      }
    </div>
  } @else {
    <div class="input-group input-group-lg shadow-sm">
      <span class="form-control bg-white fw-medium">{{ getDisplayValue() }}</span>
      <button class="btn btn-outline-secondary" type="button" (click)="startEdit.emit()">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
          <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
        </svg>
      </button>
    </div>
  }
</div>